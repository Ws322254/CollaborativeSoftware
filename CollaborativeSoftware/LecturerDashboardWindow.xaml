<Window x:Class="CollaborativeSoftware.LecturerDashboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Quiz Platform - Lecturer Dashboard" Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
      Background="#1a1a2e"
        Loaded="Window_Loaded">

    <Window.Resources>
     <!-- Toggle Button Style -->
        <Style x:Key="NavToggleButton" TargetType="Button">
          <Setter Property="Background" Value="#2d2d44"/>
            <Setter Property="Foreground" Value="#8b3dff"/>
            <Setter Property="BorderThickness" Value="0"/>
  <Setter Property="FontSize" Value="20"/>
       <Setter Property="Cursor" Value="Hand"/>
   <Setter Property="Template">
         <Setter.Value>
  <ControlTemplate TargetType="Button">
           <Border Background="{TemplateBinding Background}" CornerRadius="5" Padding="10">
  <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Border>
   <ControlTemplate.Triggers>
          <Trigger Property="IsMouseOver" Value="True">
     <Setter Property="Background" Value="#3d3d54"/>
       </Trigger>
         </ControlTemplate.Triggers>
  </ControlTemplate>
     </Setter.Value>
     </Setter>
  </Style>

        <!-- Navigation Button Style -->
        <Style x:Key="NavMenuButton" TargetType="Button">
 <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#b0b0c8"/>
          <Setter Property="BorderThickness" Value="0"/>
  <Setter Property="FontSize" Value="14"/>
   <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
       <Setter Property="Padding" Value="15,12"/>
  <Setter Property="Template">
        <Setter.Value>
   <ControlTemplate TargetType="Button">
     <Border x:Name="border" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" CornerRadius="5" Margin="5,2">
          <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
       </Border>
    <ControlTemplate.Triggers>
           <Trigger Property="IsMouseOver" Value="True">
     <Setter TargetName="border" Property="Background" Value="#2d2d44"/>
  <Setter Property="Foreground" Value="#8b3dff"/>
         </Trigger>
        </ControlTemplate.Triggers>
 </ControlTemplate>
  </Setter.Value>
    </Setter>
        </Style>

        <!-- Active Navigation Button Style -->
        <Style x:Key="NavMenuButtonActive" TargetType="Button" BasedOn="{StaticResource NavMenuButton}">
         <Setter Property="Background" Value="#8b3dff"/>
 <Setter Property="Foreground" Value="White"/>
        </Style>

        <!-- Action Button Style -->
   <Style x:Key="ActionButton" TargetType="Button">
      <Setter Property="Background" Value="#8b3dff"/>
 <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
   <Setter Property="FontSize" Value="13"/>
    <Setter Property="FontWeight" Value="SemiBold"/>
   <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Template">
                <Setter.Value>
        <ControlTemplate TargetType="Button">
           <Border Background="{TemplateBinding Background}" CornerRadius="5" Padding="{TemplateBinding Padding}">
<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Border>
  <ControlTemplate.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="#9b4dff"/>
   </Trigger>
                    <Trigger Property="IsPressed" Value="True">
   <Setter Property="Background" Value="#7b2dff"/>
        </Trigger>
      </ControlTemplate.Triggers>
          </ControlTemplate>
         </Setter.Value>
    </Setter>
        </Style>

        <!-- Success Button Style -->
        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
  <Setter Property="Background" Value="#28a745"/>
     <Style.Triggers>
     <Trigger Property="IsMouseOver" Value="True">
  <Setter Property="Background" Value="#34ce57"/>
         </Trigger>
       </Style.Triggers>
 </Style>

        <!-- Danger Button Style -->
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
         <Setter Property="Background" Value="#dc3545"/>
            <Style.Triggers>
          <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="#e4606d"/>
         </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Warning Button Style -->
    <Style x:Key="WarningButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
   <Setter Property="Background" Value="#ffc107"/>
    <Setter Property="Foreground" Value="#1a1a2e"/>
         <Style.Triggers>
             <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="#ffcd39"/>
           </Trigger>
            </Style.Triggers>
        </Style>

   <!-- Info Button Style -->
        <Style x:Key="InfoButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="#17a2b8"/>
            <Style.Triggers>
           <Trigger Property="IsMouseOver" Value="True">
      <Setter Property="Background" Value="#1fc8e3"/>
                </Trigger>
       </Style.Triggers>
</Style>

 <!-- DataGrid Style -->
     <Style TargetType="DataGrid">
         <Setter Property="Background" Value="#1a1a2e"/>
            <Setter Property="Foreground" Value="White"/>
   <Setter Property="BorderBrush" Value="#3d3d54"/>
        <Setter Property="BorderThickness" Value="1"/>
 <Setter Property="RowBackground" Value="#1a1a2e"/>
       <Setter Property="AlternatingRowBackground" Value="#252540"/>
        <Setter Property="GridLinesVisibility" Value="Horizontal"/>
        <Setter Property="HorizontalGridLinesBrush" Value="#3d3d54"/>
      <Setter Property="HeadersVisibility" Value="Column"/>
     </Style>

      <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#2d2d44"/>
      <Setter Property="Foreground" Value="#8b3dff"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="10,8"/>
       <Setter Property="BorderBrush" Value="#3d3d54"/>
      <Setter Property="BorderThickness" Value="0,0,1,1"/>
        </Style>

        <Style TargetType="DataGridCell">
     <Setter Property="Padding" Value="8,6"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Foreground" Value="White"/>
    <Style.Triggers>
           <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#8b3dff"/>
 <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="DataGridRow">
            <Setter Property="Margin" Value="0,1"/>
      <Style.Triggers>
      <Trigger Property="IsSelected" Value="True">
  <Setter Property="Background" Value="#3d3d54"/>
                </Trigger>
<Trigger Property="IsMouseOver" Value="True">
    <Setter Property="Background" Value="#2d2d44"/>
            </Trigger>
      </Style.Triggers>
        </Style>

        <!-- TextBox Style -->
  <Style x:Key="SearchTextBox" TargetType="TextBox">
      <Setter Property="Background" Value="#2d2d44"/>
    <Setter Property="Foreground" Value="White"/>
       <Setter Property="BorderBrush" Value="#3d3d54"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <!-- Stat Card Style -->
        <Style x:Key="StatCard" TargetType="Border">
            <Setter Property="Background" Value="#2d2d44"/>
  <Setter Property="CornerRadius" Value="10"/>
         <Setter Property="Padding" Value="20"/>
        <Setter Property="Margin" Value="0,0,15,0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="260"/>
<ColumnDefinition Width="*"/>
   </Grid.ColumnDefinitions>

    <!-- Side Navigation Bar -->
        <Border Grid.Column="0" Background="#0f0f1e" BorderBrush="#2d2d44" BorderThickness="0,0,1,0">
   <Grid>
           <Grid.RowDefinitions>
         <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
     </Grid.RowDefinitions>

                <!-- Header with Toggle -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="15,15,15,5">
     <Button x:Name="ToggleNavButton" Click="ToggleNav_Click" Style="{StaticResource NavToggleButton}" 
     Width="40" Height="40" Content="="/>
  <TextBlock Text="Quiz Platform" FontSize="18" FontWeight="Bold" Foreground="#8b3dff" 
  VerticalAlignment="Center" Margin="15,0,0,0"/>
 </StackPanel>

           <!-- User Info Section -->
    <Border Grid.Row="1" Padding="15" Background="#1a1a2e" Margin="10,10,10,5" CornerRadius="10">
   <StackPanel>
          <StackPanel Orientation="Horizontal">
         <Border Width="45" Height="45" CornerRadius="22" Background="#8b3dff" Margin="0,0,12,0">
        <TextBlock Text="L" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White"/>
        </Border>
  <StackPanel VerticalAlignment="Center">
   <TextBlock x:Name="UserNameBlock" Text="Lecturer" FontSize="14" FontWeight="Bold" Foreground="White"/>
   <TextBlock Text="Lecturer Account" FontSize="11" Foreground="#888888"/>
 </StackPanel>
     </StackPanel>
  </StackPanel>
    </Border>

     <!-- Navigation Menu -->
<ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
   <StackPanel Margin="5,10,5,10">
   <TextBlock Text="MAIN MENU" FontSize="11" Foreground="#666" Margin="15,10,15,10" FontWeight="Bold"/>

    <Button x:Name="DashboardNavItem" Click="NavDashboard_Click" Style="{StaticResource NavMenuButton}">
<StackPanel Orientation="Horizontal">
    <TextBlock Text="[H]" FontSize="14" Margin="0,0,12,0" FontWeight="Bold" Foreground="#8b3dff"/>
         <TextBlock Text="Dashboard" VerticalAlignment="Center" FontSize="14"/>
  </StackPanel>
  </Button>

    <Button x:Name="StudentsNavItem" Click="NavStudents_Click" Style="{StaticResource NavMenuButton}">
 <StackPanel Orientation="Horizontal">
  <TextBlock Text="[S]" FontSize="14" Margin="0,0,12,0" FontWeight="Bold" Foreground="#00d4ff"/>
      <TextBlock Text="Student Management" VerticalAlignment="Center" FontSize="14"/>
   </StackPanel>
       </Button>

            <Button x:Name="SubjectsNavItem" Click="NavSubjects_Click" Style="{StaticResource NavMenuButton}">
     <StackPanel Orientation="Horizontal">
     <TextBlock Text="[B]" FontSize="14" Margin="0,0,12,0" FontWeight="Bold" Foreground="#ffc107"/>
   <TextBlock Text="Subject Management" VerticalAlignment="Center" FontSize="14"/>
      </StackPanel>
  </Button>

     <Button x:Name="QuizzesNavItem" Click="NavQuizzes_Click" Style="{StaticResource NavMenuButton}">
      <StackPanel Orientation="Horizontal">
     <TextBlock Text="[T]" FontSize="14" Margin="0,0,12,0" FontWeight="Bold" Foreground="#28a745"/>
           <TextBlock Text="Test Management" VerticalAlignment="Center" FontSize="14"/>
  </StackPanel>
       </Button>

  <Button x:Name="QuestionsNavItem" Click="NavQuestions_Click" Style="{StaticResource NavMenuButton}">
        <StackPanel Orientation="Horizontal">
   <TextBlock Text="[Q]" FontSize="14" Margin="0,0,12,0" FontWeight="Bold" Foreground="#ff6b6b"/>
  <TextBlock Text="Question Bank" VerticalAlignment="Center" FontSize="14"/>
  </StackPanel>
         </Button>

       <Button x:Name="AnalyticsNavItem" Click="NavAnalytics_Click" Style="{StaticResource NavMenuButton}">
<StackPanel Orientation="Horizontal">
        <TextBlock Text="[A]" FontSize="14" Margin="0,0,12,0" FontWeight="Bold" Foreground="#17a2b8"/>
     <TextBlock Text="Analytics" VerticalAlignment="Center" FontSize="14"/>
   </StackPanel>
      </Button>
      </StackPanel>
         </ScrollViewer>

      <!-- Logout Button -->
    <Border Grid.Row="3" Margin="10,5,10,15">
    <Button Click="Logout_Click" Style="{StaticResource DangerButton}" Height="45">
   <StackPanel Orientation="Horizontal">
<TextBlock Text="Exit" FontSize="14" Margin="0,0,10,0" FontWeight="Bold"/>
        <TextBlock Text="Logout" VerticalAlignment="Center" FontSize="14"/>
        </StackPanel>
    </Button>
 </Border>
        </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Column="1" Margin="25,20,25,20">
            <Grid.RowDefinitions>
  <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
  <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

            <!-- Page Title -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
   <TextBlock x:Name="PageTitleIcon" Text="" FontSize="24" FontWeight="Bold" Foreground="#8b3dff" Margin="0,0,15,0" VerticalAlignment="Center"/>
     <StackPanel>
           <TextBlock x:Name="PageTitle" Text="Dashboard" FontSize="28" FontWeight="Bold" Foreground="White"/>
     <TextBlock x:Name="PageSubtitle" Text="Welcome back! Here's your overview." FontSize="14" Foreground="#888888"/>
         </StackPanel>
    </StackPanel>

            <!-- Statistics Row -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,25">
        <Border Style="{StaticResource StatCard}" Width="200">
           <StackPanel>
   <TextBlock Text="Pending Approvals" FontSize="13" Foreground="#888888" Margin="0,0,0,8"/>
   <TextBlock x:Name="PendingApprovalsBlock" Text="0" FontSize="36" FontWeight="Bold" Foreground="#ffc107"/>
  <TextBlock Text="Students awaiting" FontSize="11" Foreground="#666"/>
                </StackPanel>
        </Border>

             <Border Style="{StaticResource StatCard}" Width="200">
        <StackPanel>
               <TextBlock Text="Total Students" FontSize="13" Foreground="#888888" Margin="0,0,0,8"/>
    <TextBlock x:Name="TotalStudentsBlock" Text="0" FontSize="36" FontWeight="Bold" Foreground="#00d4ff"/>
            <TextBlock Text="Registered students" FontSize="11" Foreground="#666"/>
 </StackPanel>
            </Border>

       <Border Style="{StaticResource StatCard}" Width="200">
    <StackPanel>
  <TextBlock Text="Total Tests" FontSize="13" Foreground="#888888" Margin="0,0,0,8"/>
       <TextBlock x:Name="TotalQuizzesBlock" Text="0" FontSize="36" FontWeight="Bold" Foreground="#28a745"/>
    <TextBlock Text="Available tests" FontSize="11" Foreground="#666"/>
           </StackPanel>
          </Border>

  <Border Style="{StaticResource StatCard}" Width="200">
        <StackPanel>
     <TextBlock Text="Total Questions" FontSize="13" Foreground="#888888" Margin="0,0,0,8"/>
      <TextBlock x:Name="TotalQuestionsBlock" Text="0" FontSize="36" FontWeight="Bold" Foreground="#8b3dff"/>
 <TextBlock Text="In question bank" FontSize="11" Foreground="#666"/>
       </StackPanel>
    </Border>
            </StackPanel>

            <!-- Content Panels (Switchable) -->
            <Grid Grid.Row="2">
         <!-- Dashboard Panel -->
         <Border x:Name="DashboardPanel" Background="#2d2d44" CornerRadius="10" Padding="20" Visibility="Visible">
   <StackPanel>
   <TextBlock Text="Recent Activity" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,15"/>
        <TextBlock Text="Welcome to your lecturer dashboard!" FontSize="14" Foreground="#b0b0c8" Margin="0,0,0,10"/>
            <TextBlock Text="• Use the sidebar to navigate between sections" FontSize="13" Foreground="#888888" Margin="0,5"/>
            <TextBlock Text="• Manage student accounts in Student Management" FontSize="13" Foreground="#888888" Margin="0,5"/>
               <TextBlock Text="• Create and edit tests in Test Management" FontSize="13" Foreground="#888888" Margin="0,5"/>
          <TextBlock Text="• Add questions to the Question Bank" FontSize="13" Foreground="#888888" Margin="0,5"/>
   <TextBlock Text="• View performance data in Analytics" FontSize="13" Foreground="#888888" Margin="0,5"/>
              </StackPanel>
    </Border>

        <!-- Students Panel -->
     <Border x:Name="StudentsPanel" Background="#2d2d44" CornerRadius="10" Padding="20" Visibility="Collapsed">
        <Grid>
        <Grid.RowDefinitions>
           <RowDefinition Height="Auto"/>
  <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>

      <!-- Header -->
     <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
    <TextBlock Text="Student Management" FontSize="18" FontWeight="Bold" Foreground="White"/>
   <TextBlock Text=" - Approve, manage, and monitor student accounts" FontSize="14" Foreground="#888888" VerticalAlignment="Center" Margin="10,0,0,0"/>
     </StackPanel>

  <!-- Search and Filter -->
 <Grid Grid.Row="1" Margin="0,0,0,15">
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
<ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
        <TextBox x:Name="StudentSearchBox" Style="{StaticResource SearchTextBox}" 
TextChanged="StudentSearchBox_TextChanged" 
 Tag="Search by name, email, or student number..."/>
     <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="15,0,0,0">
    <Button Content="Refresh" Click="RefreshStudents_Click" Style="{StaticResource InfoButton}" Margin="0,0,10,0"/>
     </StackPanel>
      </Grid>

    <!-- Students DataGrid -->
       <DataGrid x:Name="StudentsDataGrid" Grid.Row="2" 
          AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
      SelectionMode="Single" SelectionUnit="FullRow">
    <DataGrid.Columns>
 <DataGridTextColumn Header="ID" Binding="{Binding StudentId}" Width="50"/>
  <DataGridTextColumn Header="Student #" Binding="{Binding StudentNumber}" Width="90"/>
   <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" Width="100"/>
     <DataGridTextColumn Header="Last Name" Binding="{Binding LastName}" Width="100"/>
    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="180"/>
       <DataGridTextColumn Header="Course" Binding="{Binding CourseTitle}" Width="120"/>
<DataGridTemplateColumn Header="Approved" Width="80">
    <DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
   <TextBlock Text="{Binding IsApproved}" Foreground="{Binding IsApproved, Converter={x:Null}}" 
 HorizontalAlignment="Center">
       <TextBlock.Style>
   <Style TargetType="TextBlock">
     <Style.Triggers>
 <DataTrigger Binding="{Binding IsApproved}" Value="True">
       <Setter Property="Foreground" Value="#28a745"/>
     <Setter Property="Text" Value="Yes"/>
      </DataTrigger>
  <DataTrigger Binding="{Binding IsApproved}" Value="False">
 <Setter Property="Foreground" Value="#ffc107"/>
     <Setter Property="Text" Value="No"/>
       </DataTrigger>
   </Style.Triggers>
  </Style>
        </TextBlock.Style>
   </TextBlock>
   </DataTemplate>
       </DataGridTemplateColumn.CellTemplate>
  </DataGridTemplateColumn>
<DataGridTemplateColumn Header="Active" Width="70">
<DataGridTemplateColumn.CellTemplate>
 <DataTemplate>
  <TextBlock HorizontalAlignment="Center">
  <TextBlock.Style>
  <Style TargetType="TextBlock">
      <Style.Triggers>
   <DataTrigger Binding="{Binding IsActive}" Value="True">
       <Setter Property="Foreground" Value="#28a745"/>
      <Setter Property="Text" Value="Yes"/>
       </DataTrigger>
 <DataTrigger Binding="{Binding IsActive}" Value="False">
      <Setter Property="Foreground" Value="#dc3545"/>
      <Setter Property="Text" Value="No"/>
    </DataTrigger>
   </Style.Triggers>
      </Style>
        </TextBlock.Style>
  </TextBlock>
  </DataTemplate>
  </DataGridTemplateColumn.CellTemplate>
  </DataGridTemplateColumn>
   <DataGridTextColumn Header="Last Login" Binding="{Binding LastLoginTime, StringFormat='dd MMM yy HH:mm'}" Width="110"/>
    </DataGrid.Columns>
    </DataGrid>

  <!-- Action Buttons -->
    <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,15,0,0">
   <Button Content="Approve Selected" Click="ApproveButton_Click" Style="{StaticResource SuccessButton}" Margin="0,0,10,0"/>
<Button Content="Disable Selected" Click="DisableButton_Click" Style="{StaticResource DangerButton}" Margin="0,0,10,0"/>
 <Button Content="Enable Selected" Click="EnableButton_Click" Style="{StaticResource WarningButton}" Margin="0,0,10,0"/>
         <Button Content="View Details" Click="ViewStudentDetails_Click" Style="{StaticResource InfoButton}"/>
 </StackPanel>

        </Grid>
            </Border>

      <!-- Tests Panel -->
          <Border x:Name="TestsPanel" Background="#2d2d44" CornerRadius="10" Padding="20" Visibility="Collapsed">
    <Grid>
   <Grid.RowDefinitions>
<RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
  <RowDefinition Height="*"/>
  <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>

    <!-- Header -->
  <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
      <TextBlock Text="Test Management" FontSize="18" FontWeight="Bold" Foreground="White"/>
   <TextBlock Text=" - Create, edit, and manage tests" FontSize="14" Foreground="#888888" VerticalAlignment="Center" Margin="10,0,0,0"/>
   </StackPanel>

  <!-- Actions Bar -->
    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,15">
   <Button Content="+ Create New Test" Click="CreateQuizButton_Click" Style="{StaticResource ActionButton}" Margin="0,0,10,0"/>
    <Button Content="Refresh" Click="RefreshTests_Click" Style="{StaticResource InfoButton}"/>
  </StackPanel>

      <!-- Tests DataGrid -->
    <DataGrid x:Name="QuizzesDataGrid" Grid.Row="2" 
    AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
 SelectionMode="Single" SelectionUnit="FullRow">
       <DataGrid.Columns>
    <DataGridTextColumn Header="ID" Binding="{Binding TestId}" Width="50"/>
 <DataGridTextColumn Header="Test Name" Binding="{Binding TestName}" Width="200"/>
   <DataGridTextColumn Header="Subject" Binding="{Binding Subject.SubjectName}" Width="150"/>
 <DataGridTextColumn Header="Questions" Binding="{Binding NumQuestions}" Width="90"/>
   <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt, StringFormat='dd MMM yyyy'}" Width="100"/>
  </DataGrid.Columns>
  </DataGrid>

    <!-- Action Buttons -->
       <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,15,0,0">
    <Button Content="Edit Selected" Click="EditQuizButton_Click" Style="{StaticResource InfoButton}" Margin="0,0,10,0"/>
  <Button Content="Delete Selected" Click="DeleteQuizButton_Click" Style="{StaticResource DangerButton}" Margin="0,0,10,0"/>
  <Button Content="View Results" Click="ViewTestResults_Click" Style="{StaticResource ActionButton}"/>
     </StackPanel>
       </Grid>
  </Border>

       <!-- Questions Panel -->
            <Border x:Name="QuestionsPanel" Background="#2d2d44" CornerRadius="10" Padding="20" Visibility="Collapsed">
  <Grid>
   <Grid.RowDefinitions>
  <RowDefinition Height="Auto"/>
   <RowDefinition Height="Auto"/>
<RowDefinition Height="*"/>
   <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>

   <!-- Header -->
   <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
   <TextBlock Text="Question Bank" FontSize="18" FontWeight="Bold" Foreground="White"/>
 <TextBlock Text=" - Manage questions for all subjects" FontSize="14" Foreground="#888888" VerticalAlignment="Center" Margin="10,0,0,0"/>
    </StackPanel>

  <!-- Actions Bar -->
    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,15">
   <Button Content="+ Add Question" Click="AddQuestion_Click" Style="{StaticResource ActionButton}" Margin="0,0,10,0"/>
    <Button Content="Refresh" Click="RefreshQuestions_Click" Style="{StaticResource InfoButton}"/>
   </StackPanel>

    <!-- Questions DataGrid -->
     <DataGrid x:Name="QuestionsDataGrid" Grid.Row="2" 
   AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
  SelectionMode="Single" SelectionUnit="FullRow">
     <DataGrid.Columns>
   <DataGridTextColumn Header="ID" Binding="{Binding QuestionId}" Width="50"/>
      <DataGridTextColumn Header="Subject" Binding="{Binding Subject.SubjectName}" Width="120"/>
    <DataGridTextColumn Header="Question" Binding="{Binding QuestionText}" Width="350"/>
    <DataGridTextColumn Header="Answer" Binding="{Binding CorrectAnswer}" Width="70"/>
 </DataGrid.Columns>
</DataGrid>

    <!-- Action Buttons -->
   <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,15,0,0">
<Button Content="Edit Question" Click="EditQuestion_Click" Style="{StaticResource InfoButton}" Margin="0,0,10,0"/>
       <Button Content="Delete Question" Click="DeleteQuestion_Click" Style="{StaticResource DangerButton}" Margin="0,0,10,0"/>
    <Button Content="View Full Question" Click="ViewQuestion_Click" Style="{StaticResource ActionButton}"/>
   </StackPanel>
  </Grid>
   </Border>

            <!-- Subjects Panel -->
   <Border x:Name="SubjectsPanel" Background="#2d2d44" CornerRadius="10" Padding="20" Visibility="Collapsed">
   <Grid>
    <Grid.RowDefinitions>
   <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
   <RowDefinition Height="*"/>
   <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>

    <!-- Header -->
  <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
 <TextBlock Text="Subject Management" FontSize="18" FontWeight="Bold" Foreground="White"/>
     <TextBlock Text=" - Create and manage quiz subjects" FontSize="14" Foreground="#888888" VerticalAlignment="Center" Margin="10,0,0,0"/>
    </StackPanel>

  <!-- Actions Bar -->
 <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,15">
   <Button Content="+ Create New Subject" Click="CreateSubject_Click" Style="{StaticResource ActionButton}" Margin="0,0,10,0"/>
   <Button Content="Refresh" Click="RefreshSubjects_Click" Style="{StaticResource InfoButton}"/>
    </StackPanel>

   <!-- Subjects DataGrid -->
 <DataGrid x:Name="SubjectsDataGrid" Grid.Row="2" 
   AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
     SelectionMode="Single" SelectionUnit="FullRow">
    <DataGrid.Columns>
   <DataGridTextColumn Header="ID" Binding="{Binding SubjectId}" Width="60"/>
      <DataGridTextColumn Header="Subject Name" Binding="{Binding SubjectName}" Width="300"/>
 <DataGridTemplateColumn Header="Active" Width="100">
  <DataGridTemplateColumn.CellTemplate>
     <DataTemplate>
<TextBlock HorizontalAlignment="Center">
     <TextBlock.Style>
 <Style TargetType="TextBlock">
   <Style.Triggers>
 <DataTrigger Binding="{Binding IsActive}" Value="True">
   <Setter Property="Foreground" Value="#28a745"/>
  <Setter Property="Text" Value="Active"/>
 </DataTrigger>
 <DataTrigger Binding="{Binding IsActive}" Value="False">
  <Setter Property="Foreground" Value="#dc3545"/>
    <Setter Property="Text" Value="Inactive"/>
 </DataTrigger>
    </Style.Triggers>
   </Style>
  </TextBlock.Style>
       </TextBlock>
 </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn>
</DataGrid.Columns>
 </DataGrid>

    <!-- Action Buttons -->
    <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,15,0,0">
   <Button Content="Edit Subject" Click="EditSubject_Click" Style="{StaticResource InfoButton}" Margin="0,0,10,0"/>
  <Button Content="Toggle Active" Click="ToggleSubjectActive_Click" Style="{StaticResource WarningButton}" Margin="0,0,10,0"/>
  <Button Content="Delete Subject" Click="DeleteSubject_Click" Style="{StaticResource DangerButton}"/>
 </StackPanel>
   </Grid>
 </Border>

 <!-- Analytics Panel -->
       <Border x:Name="AnalyticsPanel" Background="#2d2d44" CornerRadius="10" Padding="20" Visibility="Collapsed">
      <Grid>
        <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
<RowDefinition Height="*"/>
     </Grid.RowDefinitions>

 <!-- Header -->
    <TextBlock Grid.Row="0" Text="Analytics &amp; Reports" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>

  <!-- Analytics Content -->
    <StackPanel Grid.Row="1">
 <Border Background="#1a1a2e" CornerRadius="8" Padding="20" Margin="0,0,0,15">
   <StackPanel>
    <TextBlock Text="Test Performance Summary" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,10"/>
   <TextBlock x:Name="AnalyticsSummary" Text="Loading analytics data..." FontSize="14" Foreground="#b0b0c8"/>
  </StackPanel>
     </Border>

        <Border Background="#1a1a2e" CornerRadius="8" Padding="20">
 <StackPanel>
      <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
  <TextBlock Text="Top Performing Students" FontSize="16" FontWeight="SemiBold" Foreground="White"/>
  <Button Content="Refresh" Click="RefreshLeaderboard_Click" 
    Style="{StaticResource InfoButton}" Margin="20,0,0,0" 
     Padding="10,5" FontSize="12"/>
   </StackPanel>
   <DataGrid x:Name="LeaderboardDataGrid" Height="250"
      AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
 SelectionMode="Single" SelectionUnit="FullRow">
 <DataGrid.Columns>
  <DataGridTextColumn Header="Rank" Binding="{Binding Rank}" Width="60">
   <DataGridTextColumn.ElementStyle>
<Style TargetType="TextBlock">
  <Setter Property="Foreground" Value="#ffc107"/>
   <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>
   </DataGridTextColumn.ElementStyle>
        </DataGridTextColumn>
       <DataGridTextColumn Header="Student" Binding="{Binding StudentName}" Width="200">
    <DataGridTextColumn.ElementStyle>
  <Style TargetType="TextBlock">
<Setter Property="Foreground" Value="White"/>
         <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>
       </DataGridTextColumn.ElementStyle>
 </DataGridTextColumn>
    <DataGridTextColumn Header="Tests Taken" Binding="{Binding TestsTaken}" Width="100">
   <DataGridTextColumn.ElementStyle>
  <Style TargetType="TextBlock">
             <Setter Property="Foreground" Value="#00d4ff"/>
  <Setter Property="VerticalAlignment" Value="Center"/>
  </Style>
    </DataGridTextColumn.ElementStyle>
  </DataGridTextColumn>
    <DataGridTextColumn Header="Avg Score" Binding="{Binding AverageScore, StringFormat='{}{0:F1}%'}" Width="100">
    <DataGridTextColumn.ElementStyle>
   <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="#28a745"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
  </Style>
 </DataGridTextColumn.ElementStyle>
 </DataGridTextColumn>
    <DataGridTextColumn Header="Total Points" Binding="{Binding TotalPoints}" Width="100">
       <DataGridTextColumn.ElementStyle>
    <Style TargetType="TextBlock">
      <Setter Property="Foreground" Value="#8b3dff"/>
  <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
   </Style>
   </DataGridTextColumn.ElementStyle>
   </DataGridTextColumn>
   </DataGrid.Columns>
 </DataGrid>
 </StackPanel>
  </Border>
   </StackPanel>
  </Grid>
   </Border>
        </Grid>
        </Grid>
    </Grid>
</Window>
